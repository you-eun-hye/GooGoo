<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <title>Login</title>
    <link rel="stylesheet" href="/css/login.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <div class="container">
<!--    <form action="#">-->
    <form>
      <div class="title">로그인</div>
      <div class="input-box underline">
        <input type="text" id="signInEmail" placeholder="이메일" required>
        <div class="underline"></div>
      </div>
      <div class="input-box">
        <input type="password" id="signInPassword" placeholder="비밀번호" required>
        <div class="underline"></div>
      </div>
        <button type="submit" id="signIn"> 로그인 </button>
    </form>

    <div class="join"><a href="/user/join">회원 가입</a></div>

    <div class="option">
      <a href="#">아이디 찾기</a>
      <a href="#">비밀번호 찾기</a>
    </div>

    <img id="google" src="/btn_google_signin_light_pressed_web.png">

  </div>
</body>

<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
        apiKey: "AIzaSyA_kRKcnzHcFUwuaA8T7B7lmyH1bdDCndo",
        authDomain: "googoo-17905.firebaseapp.com",
        projectId: "googoo-17905",
        storageBucket: "googoo-17905.appspot.com",
        messagingSenderId: "787821197259",
        appId: "1:787821197259:web:a672c55b129c4e59e8684e",
        measurementId: "G-BVRCDQ9V6Q"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);

    const provider = new GoogleAuthProvider();
    const auth = getAuth();

    // document.getElementById('signIn').addEventListener('click', (event) => {
    //     event.preventDefault()
    //     const email = document.getElementById('signInEmail').value
    //     const password = document.getElementById('signInPassword').value
    //     signInWithEmailAndPassword(auth, email, password)
    //         .then((userCredential) => {
    //             console.log(userCredential)
    //             // Signed in
    //             const user = userCredential.user;
    //             // ...
    //         })
    //         .catch((error) => {
    //             console.log('error')
    //             const errorCode = error.code;
    //             const errorMessage = error.message;
    //             // ..
    //         });
    // })

    document.getElementById('google').addEventListener('click', () => {
        signInWithPopup(auth, provider)
            .then((result) => {
                // This gives you a Google Access Token. You can use it to access the Google API.
                const credential = GoogleAuthProvider.credentialFromResult(result);
                const token = credential.accessToken;
                // The signed-in user info.
                const user = result.user;
                // IdP data available using getAdditionalUserInfo(result)
                // ...
                console.log(result)
            }).catch((error) => {
            // Handle Errors here.
            const errorCode = error.code;
            const errorMessage = error.message;
            // The email of the user's account used.
            const email = error.customData.email;
            // The AuthCredential type that was used.
            const credential = GoogleAuthProvider.credentialFromError(error);
            // ...
            console.log(error)
        });
    })
</script>
</html>